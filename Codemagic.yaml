workflows:
  final-build:
    name: Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    environment:
      node: 18
    scripts:
      - name: ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙŠÙƒÙ„
        script: |
          echo "ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯ Ø§Ù„ØªØµØ­ÙŠØ­:"
          ls -la
          echo ""
          echo "âœ… ÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ù…ÙƒØ§Ù†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­"
      
      - name: Ø¨Ù†Ø§Ø¡ APK
        script: |
          echo "ğŸ”¨ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ù†Ø§Ø¡..."
          npm install
          npx expo prebuild --platform android
          cd android
          ./gradlew assembleDebug
          echo "ğŸ‰ APK Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªØ­Ù…ÙŠÙ„!"
    
    artifacts:
      - android/app/build/outputs/apk/debug/*.apk
      - android/app/build/outputs/apk/debug/app-debug.apk
    
    publishing:
      email:
        recipients:
          - maisabbas445@gmail.com
        subject: "ğŸš€ ØªØ·Ø¨ÙŠÙ‚ Simply AI Ø¬Ø§Ù‡Ø²!"
        body: |
          ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ø¹Ø¯ ØªØµØ­ÙŠØ­ Ø§Ù„Ù‡ÙŠÙƒÙ„!
          
          ğŸ“¥ Ø­Ù…Ù„ APK Ù…Ù†: ${CM_ARTIFACT_LINKS}
          
          Ø£Ùˆ Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Codemagic â†’ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ù†Ø§Ø¡ â†’ Artifacts

triggering:
  events: [push]
  branch_patterns:
    - pattern: '*'
      include: true
